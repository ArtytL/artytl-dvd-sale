<script>
  // ตรวจสอบสิทธิ์ Admin
  const ADMIN_EMAILS = ["artyt.sun@gmail.com"];

  function checkAdmin(user) {
    if (!user || !user.email) return false;
    const email = user.email.toLowerCase().trim();
    return ADMIN_EMAILS.includes(email);
  }

  // กดปุ่ม Admin
  document.getElementById("adminButton").addEventListener("click", () => {
    console.log("Admin button clicked");
    if (checkAdmin(currentUser)) {
      window.location.href = "admin.html";
    } else {
      alert("คุณไม่มีสิทธิ์เข้าหน้า Admin");
    }
  });

  // บันทึกสินค้า
  async function saveProduct(productId, productData) {
    try {
      console.log("Saving product:", productId, productData);
      await setDoc(doc(db, "products", productId), productData);
      alert("บันทึกสำเร็จ");
    } catch (error) {
      console.error("Error saving product:", error);
      alert("เกิดข้อผิดพลาดในการบันทึก");
    }
  }

  // ดึงข้อมูลสินค้า
  async function loadProduct(productId) {
    try {
      console.log("Loading product:", productId);
      const docSnap = await getDoc(doc(db, "products", productId));
      if (docSnap.exists()) {
        console.log("Product data:", docSnap.data());
        return docSnap.data();
      } else {
        console.warn("ไม่พบสินค้า:", productId);
        return null;
      }
    } catch (error) {
      console.error("Error loading product:", error);
      return null;
    }
  }
</script>
